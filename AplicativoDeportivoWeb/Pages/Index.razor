@page "/"
@using AplicativoDeportivoWeb.Domain
@using Toolbelt.Blazor.HeadElement
@inject ILogger<Index> Logger
@inject AplicativoDeportivoWeb.Repository.Postgres.IUserRepository UserRepository
@inject IHeadElementHelper HeadElementHelper
@inject NavigationManager NavigationManager

<PageTitle>Registro</PageTitle>

      <div class=index-page
        <div class="py-5 text-center index-page">
        <img class="d-block mx-auto mb-4" src="/images/38464.png" alt="" width="72" height="72">
        <h1>Registro de nuevo usuario</h1>
      </div>
<div class="d-flex align-items-center justify-content-center vh-100 Registro-page text-center container" style="max-width: 600px; box-shadow: 0px 0px 25px rgba(0,0,0,0.15); background-color: rgba(200, 238, 238, 0.8); border-radius: 10px;">  
  <form class="needs-validation" novalidate method="post" @onsubmit="Submit" @formname="Index">
            <AntiforgeryToken />
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="firstName">Nombre</label>
                <InputText type="text" class="form-control" id="firstName" placeholder=""  required @bind-Value="Model!.Name"/>
                <div class="invalid-feedback">
                  Valid first name is required.
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="Surname">Apellido</label>
                <InputText type="text" class="form-control" id="Surname" placeholder=""  required @bind-Value="Model!.Surname"/>
                <div class="invalid-feedback">
                  Valid last name is required.
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="email">Email </label>
              <InputText type="email" class="form-control" id="email" placeholder=""  required @bind-Value="Model!.Email"/>
            </div>

            <div class="mb-3">
              <label for="password">Contraseña </label>
              <InputText type="password" class="form-control" id="password" placeholder=""  required @bind-Value="Model!.Password"/>
            </div>

           <div class="mb-3">
              <label for="dob">Fecha de nacimiento </label>
                <InputDate class="form-control" id="dob" placeholder=""  required @bind-Value="Model!.DOB"/>
            </div>

            <div class="mb-3">
              <label for="peso">Peso </label>
              <InputNumber type="float" class="form-control" id="Weight" placeholder=""  required @bind-Value="Model!.Weight"/>
            </div>

            <div class="mb-3">
              <label for="height">Altura </label>
              <InputNumber type="float" class="form-control" id="Height" placeholder=""  required @bind-Value="Model!.Height"/>
            </div>
            
            <hr class="mb-4">

            

            <div class="d-block my-3">
            
            </div>
            <button class="btn btn-primary btn-lg btn-block" type="submit">¡Registrarse!</button>
          </form>
        </div>
        <footer class="my-5 pt-5 text-muted text-center text-small">
        <p class="mb-1">&copy; 2023-2024 Ramón M R / TEG IUPSM </p>
        
      </footer>
      </div>
@code {
  [SupplyParameterFromForm]
  public User? Model { get; set; }
  protected override void OnInitialized()
  {
      Model ??= new User { DOB = DateTime.Now };
  }
  private string formname = "Index";
  private void Submit()
  {
      Logger.LogInformation("listo 🏋️‍♂️");
      Logger.LogInformation("Id = {Id}", Model?.Id);
      Logger.LogInformation("Name = {Name}", Model?.Name);
      Logger.LogInformation("Surname = {Surname}", Model?.Surname);
      Logger.LogInformation("Email = {Email}", Model?.Email);
      Logger.LogInformation("Password = {Password}", Model?.Password);
      Logger.LogInformation("dob = {dob}", Model?.DOB.ToUniversalTime());
      Logger.LogInformation("Height = {Height}", Model?.Height);
      Logger.LogInformation("Weight = {Weight}", Model?.Weight);
      UserRepository.AddUser(Model);

      NavigationManager.NavigateTo("/login"); 
  }
  
  }

